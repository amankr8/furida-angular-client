<div class="container mx-auto mb-16">
  <div class="flex justify-center items-center">
    <form
      [formGroup]="form"
      #formDirective="ngForm"
      (ngSubmit)="submit()"
      class="w-full max-w-lg"
    >
      <div class="card bg-white shadow-lg rounded-lg p-6">
        <div class="space-y-4">
          <!-- Form Fields -->
          <div class="form-control">
            <label for="name" class="label">
              <span class="label-text">Full Name</span>
            </label>
            <input
              id="name"
              type="text"
              formControlName="name"
              class="input input-bordered"
            />
            <div
              *ngIf="form.get('name')?.hasError('required')"
              class="text-red-500 text-xs mt-1"
            >
              Name is required
            </div>
          </div>

          <div class="form-control">
            <label for="email" class="label">
              <span class="label-text">Email</span>
            </label>
            <input
              id="email"
              type="email"
              formControlName="email"
              class="input input-bordered"
            />
            <div
              *ngIf="form.get('email')?.hasError('required')"
              class="text-red-500 text-xs mt-1"
            >
              Email is required
            </div>
            <div
              *ngIf="
                form.get('email')?.hasError('email') &&
                !form.get('email')?.hasError('required')
              "
              class="text-red-500 text-xs mt-1"
            >
              Please enter a valid email address
            </div>
          </div>

          <div class="form-control">
            <label for="msg" class="label">
              <span class="label-text">Message</span>
            </label>
            <textarea
              id="msg"
              rows="5"
              formControlName="msg"
              class="textarea textarea-bordered"
            ></textarea>
            <div
              *ngIf="form.get('msg')?.hasError('required')"
              class="text-red-500 text-xs mt-1"
            >
              Message is required
            </div>
            <div
              *ngIf="
                form.get('msg')?.hasError('maxlength') &&
                !form.get('msg')?.hasError('required')
              "
              class="text-red-500 text-xs mt-1"
            >
              Message is larger than the limit
            </div>
          </div>

          <div class="flex justify-end items-center gap-2">
            <div
              *ngIf="loading$ | async"
              class="animate-spin border-4 border-blue-500 border-t-transparent rounded-full w-6 h-6"
            ></div>
            <button
              class="btn btn-primary"
              type="submit"
              [disabled]="form.invalid || (loading$ | async)"
            >
              Send
            </button>
          </div>
        </div>
      </div>
    </form>
  </div>
</div>
