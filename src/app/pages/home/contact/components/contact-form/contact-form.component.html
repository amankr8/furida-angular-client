<div class="container mx-auto mb-3">
  <div class="flex justify-center items-center">
    <form
      [formGroup]="form"
      #formDirective="ngForm"
      (ngSubmit)="submit()"
      class="w-full max-w-lg"
    >
      <div class="bg-white shadow-lg rounded-lg border p-6">
        <div class="flex flex-col space-y-4">
          <!-- Form Fields -->
          <div class="flex flex-col">
            <label for="name" class="text-sm font-semibold">Full Name</label>
            <input
              id="name"
              type="text"
              formControlName="name"
              class="border p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
            />
            <div
              *ngIf="form.get('name')?.hasError('required')"
              class="text-red-500 text-xs mt-1"
            >
              Name is required
            </div>
          </div>

          <div class="flex flex-col">
            <label for="email" class="text-sm font-semibold">Email</label>
            <input
              id="email"
              type="email"
              formControlName="email"
              class="border p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
            />
            <div
              *ngIf="form.get('email')?.hasError('required')"
              class="text-red-500 text-xs mt-1"
            >
              Email is required
            </div>
            <div
              *ngIf="
                form.get('email')?.hasError('email') &&
                !form.get('email')?.hasError('required')
              "
              class="text-red-500 text-xs mt-1"
            >
              Please enter a valid email address
            </div>
          </div>

          <div class="flex flex-col">
            <label for="msg" class="text-sm font-semibold">Message</label>
            <textarea
              id="msg"
              rows="5"
              formControlName="msg"
              class="border p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
            ></textarea>
            <div
              *ngIf="form.get('msg')?.hasError('required')"
              class="text-red-500 text-xs mt-1"
            >
              Message is required
            </div>
            <div
              *ngIf="
                form.get('msg')?.hasError('maxlength') &&
                !form.get('msg')?.hasError('required')
              "
              class="text-red-500 text-xs mt-1"
            >
              Message is larger than the limit
            </div>
          </div>

          <div class="flex justify-end items-center gap-2">
            <div
              *ngIf="loading$ | async"
              class="animate-spin border-4 border-blue-500 border-t-transparent rounded-full w-6 h-6"
            ></div>
            <button
              class="bg-blue-500 text-white py-2 px-4 rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-400"
              type="submit"
              [disabled]="form.invalid || (loading$ | async)"
            >
              Send
            </button>
          </div>
        </div>
      </div>
    </form>
  </div>
</div>
